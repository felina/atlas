/*! atlas - v0.0.10 - 2014-03-14
* https://github.com/felina/atlas
* Copyright (c) 2014 Giles Lavelle; Licensed MIT */
!function(a){var b=function(b,c){return a("<button>").addClass(c).text(b)};a.fn.atlas=function(c){var d=a.extend({width:500,height:500,callback:function(){},style:{classes:"",css:{}}},c),e={saver:b("Save location",d.style.classes,d.style.css),locator:b("Find me",d.style.classes,d.style.css)},f=new GMaps({div:a("<div>")[0],lat:0,lng:0,zoom:2,click:function(a){f.removeMarkers(),f.addMarker({lat:a.latLng.d,lng:a.latLng.e})}});return a(e.saver).on("click",function(){if(0===f.markers.length)return void alert("Please choose a location");var a=f.markers[0].position;GMaps.geocode({lat:a.d,lng:a.e,callback:function(a,b){"OK"===b&&d.callback(a[0].formatted_address)}})}),a(e.locator).on("click",function(){GMaps.geolocate({success:function(a){f.setCenter(a.coords.latitude,a.coords.longitude),f.setZoom(12)},error:function(a){alert("Geolocation failed: "+a.message)},not_supported:function(){alert("Your browser does not support geolocation")}})}),this.append(e.saver).append(e.locator).append(a(f.el).height(d.height).width(d.width)),f}}(jQuery);